(this["webpackJsonpgeonode-mobile-sample"]=this["webpackJsonpgeonode-mobile-sample"]||[]).push([[1],{103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),c=a.n(l),o=a(1),s=a(61),i=a(22),u={defaultDarkMode:!1,serverBaseURL:"https://summit2020.cartoview.net",profileURL:"api/profiles/",authenticationURL:"o/token/",authenticationType:"password",authenticationClientId:"2DkWeRYRYCwidWqtwlA9IvL0AJMoZB6S8iJFLfU2",authenticationClientSecret:"8OsZciU4N4lkqyBHKFiEJQJuhjTnqzFZeoWsIofIEUTvxQUFu9FDRv2NelHikiGr3M47RpInANd27L862gPtjUWYbX276dQ2qlXDvRIvoob6LvMKNVu4veYieqKMt8tO",logoutURL:"o/revoke_token/"},m={darkMode:u.defaultDarkMode,showWelcomeScreen:!0},d=r.a.createContext({settings:m,showLoginModal:!1,initializeGeneralContext:function(){},setDarkMode:function(){},setShowWelcomeScreen:function(){},setShowLoginModal:function(){}}),p=a(34),E=a(3),f=a.n(E),b=a(8),g=a(6),h=a(27),v=h.a.Storage,j=function(e){var t=Object(n.useState)(m),a=Object(g.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(g.a)(o,2),i=s[0],u=s[1];Object(n.useEffect)((function(){v.set({key:"settings",value:JSON.stringify(l)})}),[l]);var E=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get({key:"settings"});case 2:t=e.sent,a=t.value?JSON.parse(t.value):m,c(a),h(a.darkMode),j(a.showWelcomeScreen);case 7:case"end":return e.stop()}}),e)}))),[]),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.darkMode;document.body.classList.toggle("dark",e);var t={darkMode:e};c((function(e){return Object(p.a)(Object(p.a)({},e),t)}))},j=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={showWelcomeScreen:e};c((function(e){return Object(p.a)(Object(p.a)({},e),t)}))};return r.a.createElement(d.Provider,{value:{settings:l,showLoginModal:i,initializeGeneralContext:E,setDarkMode:h,setShowWelcomeScreen:j,setShowLoginModal:u}},e.children)},y=r.a.createContext({currentUser:null,loginHandler:function(){var e=Object(b.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),logoutHandler:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),initializeAuthenticationContext:function(){}}),O=a(43),k=a.n(O),x=a(64),w=a.n(x).a.create({baseURL:u.serverBaseURL}),N=h.a.Storage,C=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){N.set({key:"authentication",value:JSON.stringify(l)})}),[l]);var o=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get({key:"authentication"});case 2:t=e.sent,a=t.value?JSON.parse(t.value):null,c(a);case 5:case"end":return e.stop()}}),e)}))),[]),s=function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,l,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={client_id:u.authenticationClientId,client_secret:u.authenticationClientSecret,grant_type:u.authenticationType,username:t,password:a},e.prev=1,e.next=4,w.post(u.authenticationURL,k.a.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return r=e.sent,e.next=7,w.get(u.profileURL,{params:{username:t}});case 7:return l=e.sent,o=l.data.objects[0],s={username:t,firstName:o.first_name,lastName:o.last_name,id:o.id,avatar:o.avatar_100,dateJoined:new Date(o.date_joined),accessToken:r.data.access_token,refreshToken:r.data.refresh_token,expires:null},c(s),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={client_id:u.authenticationClientId,client_secret:u.authenticationClientSecret,token:null===l||void 0===l?void 0:l.accessToken},e.prev=1,e.next=4,w.post(u.logoutURL,k.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return c(null),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(y.Provider,{value:{currentUser:l,loginHandler:s,logoutHandler:i,initializeAuthenticationContext:o}},e.children)},S=a(4),_=(a(103),function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(g.a)(c,2),i=s[0],u=s[1],m=Object(n.useContext)(y).loginHandler,p=Object(n.useContext)(d),E=p.showLoginModal,h=p.setShowLoginModal,v=Object(n.useRef)(null),j=Object(n.useRef)(null),O=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.current.value,a=j.current.value,t&&a&&0!==t.toString().trim().length&&0!==a.toString().trim().length){e.next=5;break}return l("Please enter valid data"),e.abrupt("return");case 5:return l(""),u(!0),e.next=9,m(t.toString(),a.toString());case 9:n=e.sent,u(!1),n?h(!1):l("Failed to login");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(o.z,{isOpen:E},r.a.createElement(o.v,{isOpen:i,message:"Please wait..."}),r.a.createElement(o.R,{isOpen:!!a,onDidDismiss:function(){return l("")},message:a,duration:2e3}),r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.Q,null,"Login"),r.a.createElement(o.e,{slot:"end"},r.a.createElement(o.d,{onClick:function(){return h(!1)}},"Close")))),r.a.createElement(o.k,null,r.a.createElement(o.m,{className:"ion-padding"},r.a.createElement(o.K,null,r.a.createElement(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end"},r.a.createElement(o.q,null,r.a.createElement(o.s,{position:"floating"},"Username"),r.a.createElement(o.p,{ref:v,type:"text"}))),r.a.createElement(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end"},r.a.createElement(o.q,null,r.a.createElement(o.s,{position:"floating"},"Password"),r.a.createElement(o.p,{ref:j,type:"password"})))),r.a.createElement(o.K,{className:"ion-margin-top"},r.a.createElement(o.j,{offset:"3",size:"6",className:"ion-text-center"},r.a.createElement(o.d,{expand:"block",onClick:O},r.a.createElement(o.o,{slot:"start",icon:S.D}),"Login"))),r.a.createElement(o.K,null,r.a.createElement(o.j,{sizeXs:"12",className:"ion-text-center ion-margin-top"},r.a.createElement(o.s,null,"If you don't have an account yet")),r.a.createElement(o.j,{sizeXs:"12",className:"ion-text-center"},r.a.createElement(o.d,{disabled:!0,fill:"clear"},"Register Now"))),r.a.createElement(o.K,{className:"ion-margin-top"},r.a.createElement(o.j,{offset:"3",size:"6",className:"ion-text-center"},r.a.createElement(o.d,{fill:"outline",onClick:function(){return h(!1)}},r.a.createElement(o.o,{slot:"start",icon:S.h}),"Close"))))))}),D=(a(104),a(65)),M=[{title:"Home",url:"/page/home",iosIcon:S.o,mdIcon:S.p},{title:"Layers",url:"/page/layers",iosIcon:S.s,mdIcon:S.t},{title:"Maps",url:"/page/maps",iosIcon:S.y,mdIcon:S.z},{title:"Documents",url:"/page/documents",iosIcon:S.k,mdIcon:S.l},{title:"Settings",url:"/page/settings",iosIcon:S.J,mdIcon:S.K},{title:"About",url:"/page/about",iosIcon:S.q,mdIcon:S.r}],L=function(){var e=Object(n.useContext)(y),t=e.currentUser,a=e.logoutHandler,l=Object(n.useContext)(d).setShowLoginModal,c=Object(n.useState)(!1),s=Object(g.a)(c,2),u=s[0],m=s[1],p=Object(i.f)(),E=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,a();case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(o.w,{contentId:"main-menu",type:"overlay"},r.a.createElement(o.k,null,r.a.createElement(o.v,{isOpen:u,message:"Please wait..."}),r.a.createElement(o.m,{className:"cover-background"},r.a.createElement(o.K,{className:"ion-justify-content-center ion-margin-top"},t?r.a.createElement(o.I,{href:"/page/profile"},r.a.createElement("img",{src:t.avatar,alt:"profile",className:"user-thumbnail"})):r.a.createElement("img",{src:"/assets/img/avatar.svg",alt:"profile",className:"user-thumbnail"})),r.a.createElement(o.K,{className:"ion-justify-content-center ion-margin-top"},r.a.createElement("h1",{className:"ion-no-margin color-white"},null===t||void 0===t?void 0:t.username))),r.a.createElement(o.t,{id:"inbox-list"},!t&&r.a.createElement(o.q,{className:"ion-margin-bottom",lines:"none",detail:!1,onClick:function(){return l(!0)}},r.a.createElement(o.o,{className:"ion-padding-start",slot:"start",ios:S.u,md:S.v}),r.a.createElement(o.s,null,"Login")),M.map((function(e,t){return r.a.createElement(o.y,{key:t,autoHide:!1},r.a.createElement(o.q,{className:p.pathname===e.url?"selected":"",routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},r.a.createElement(o.o,{className:"ion-padding-start",slot:"start",ios:e.iosIcon,md:e.mdIcon}),r.a.createElement(o.s,null,e.title)))})),t&&r.a.createElement(o.q,{className:"ion-margin-top",lines:"none",detail:!1,onClick:E},r.a.createElement(o.o,{className:"ion-padding-start",slot:"start",ios:S.w,md:S.x}),r.a.createElement(o.s,null,"Logout")))),r.a.createElement(o.A,{className:"ion-margin-start"},"version: "+D.version))},q=function(e){return r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.e,{slot:"start"},r.a.createElement(o.b,{defaultHref:"/page/home"})),r.a.createElement(o.Q,null,e.title)))},I=h.a.App,z=function(){var e=Object(i.f)(),t=Object(i.e)(),a=Object(n.useState)(!1),l=Object(g.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(g.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){document.addEventListener("ionBackButton",(function(e){e.detail.register(-1,(function(){t.goBack(),setTimeout((function(){return p(!1)}),1500),d?I.exitApp():(p(!0),s(!0))}))}))}),[e,t,d]),r.a.createElement(o.R,{isOpen:c,onDidDismiss:function(){return s(!1)},message:"Press again to Exit",duration:1500})},T=(a(105),function(){var e=Object(n.useContext)(y).currentUser,t=Object(n.useContext)(d).setShowLoginModal,a=Object(n.useState)(!1),l=Object(g.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(0),u=Object(g.a)(i,2),m=u[0],p=u[1],E=Object(n.useState)(0),h=Object(g.a)(E,2),v=h[0],j=h[1],O=Object(n.useState)(0),k=Object(g.a)(O,2),x=k[0],N=k[1],C=Object(n.useState)(0),_=Object(g.a)(C,2),D=_[0],M=_[1],L=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n,r,l,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:null,s(!0),e.prev=2,e.next=5,w.get("/api/layers",{headers:{Authorization:"Bearer ".concat(t)}});case 5:return a=e.sent,e.next=8,w.get("/api/maps",{headers:{Authorization:"Bearer ".concat(t)}});case 8:return n=e.sent,e.next=11,w.get("/api/documents",{headers:{Authorization:"Bearer ".concat(t)}});case 11:return r=e.sent,e.next=14,w.get("/api/profiles",{headers:{Authorization:"Bearer ".concat(t)}});case 14:l=e.sent,p(a.data.meta.total_count),j(n.data.meta.total_count),N(r.data.meta.total_count),M(l.data.meta.total_count);case 19:return e.prev=19,s(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,,19,22]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){e?L(e.accessToken):L()}),[e]);var q=function(){var t=Object(b.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,L(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,L();case 7:a.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.e,{slot:"start"},r.a.createElement(o.x,null)),r.a.createElement(o.Q,null,"GeoNode Mobile"),c&&r.a.createElement(o.N,{slot:"end",color:"light",className:"ion-margin-end"}))),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.F,{slot:"fixed",onIonRefresh:q},r.a.createElement(o.G,null)),r.a.createElement(o.q,{lines:"none"},r.a.createElement("h1",{slot:"start"},r.a.createElement(o.i,{color:"danger",outline:!0,className:"welcome-title ion-no-margin"},"Welcome")),!e&&r.a.createElement(o.i,{slot:"end",color:"primary",onClick:function(){return t(!0)},className:"ion-no-margin"},"Login")),r.a.createElement(o.q,{lines:"none"},"GeoNode is an open source platform for sharing geospatial data and maps."),r.a.createElement(o.f,null,r.a.createElement(o.h,null,r.a.createElement(o.q,{lines:"none",className:"ion-no-padding",href:"/page/layers"},r.a.createElement(o.i,{slot:"start",color:"primary"},r.a.createElement(o.o,{icon:S.s}),r.a.createElement(o.s,null,"Layers")),r.a.createElement(o.c,{slot:"end"},m))),r.a.createElement(o.g,null,"Geospatial data published by other users, organizations and public sources. Download data in standard formats.")),r.a.createElement(o.f,null,r.a.createElement(o.h,null,r.a.createElement(o.q,{lines:"none",className:"ion-no-padding",href:"/page/maps"},r.a.createElement(o.i,{slot:"start",color:"primary"},r.a.createElement(o.o,{icon:S.y}),r.a.createElement(o.s,null,"Maps")),r.a.createElement(o.c,{slot:"end"},v))),r.a.createElement(o.g,null,"Data is available for browsing, aggregating and styling to generate maps which can be saved, downloaded, shared publicly or restricted to specify users only.")),r.a.createElement(o.f,null,r.a.createElement(o.h,null,r.a.createElement(o.q,{lines:"none",className:"ion-no-padding",href:"/page/documents"},r.a.createElement(o.i,{slot:"start",color:"primary"},r.a.createElement(o.o,{icon:S.k}),r.a.createElement(o.s,null,"Documents")),r.a.createElement(o.c,{slot:"end"},x))),r.a.createElement(o.g,null,"As for the layers and maps GeoNode allows to publish tabular and text data, manage theirs metadata and associated documents.")),r.a.createElement(o.f,null,r.a.createElement(o.h,null,r.a.createElement(o.q,{lines:"none",className:"ion-no-padding"},r.a.createElement(o.i,{slot:"start",color:"primary"},r.a.createElement(o.o,{icon:S.E}),r.a.createElement(o.s,null,"Users")),r.a.createElement(o.c,{slot:"end"},D))),r.a.createElement(o.g,null,"Geonode allows registered users to easily upload geospatial data and various documents in several formats."))))}),U=(a(106),function(){var e,t=Object(n.useContext)(y).currentUser;return r.a.createElement(o.B,null,r.a.createElement(q,{title:"Profile"}),r.a.createElement(o.k,null,r.a.createElement(o.m,{className:"ion-margin-top"},r.a.createElement(o.K,null,r.a.createElement(o.j,{className:"ion-text-center"},r.a.createElement("img",{className:"profile-picture",src:null===t||void 0===t?void 0:t.avatar,alt:"profile"}))),r.a.createElement(o.K,null,r.a.createElement(o.j,{className:"ion-text-center"},r.a.createElement(o.d,{fill:"outline"},r.a.createElement(o.o,{icon:S.j,slot:"start"}),"Upload"),r.a.createElement(o.d,{fill:"outline"},r.a.createElement(o.o,{icon:S.c,slot:"start"}),"Camera"))),r.a.createElement(o.K,{className:"ion-margin-start ion-margin-end"},r.a.createElement(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end"},r.a.createElement(o.q,null,r.a.createElement(o.s,{position:"floating"},"First Name"),r.a.createElement(o.p,{readonly:!0,type:"text",value:null===t||void 0===t?void 0:t.firstName}))),r.a.createElement(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end"},r.a.createElement(o.q,null,r.a.createElement(o.s,{position:"floating"},"Last Name"),r.a.createElement(o.p,{readonly:!0,type:"text",value:null===t||void 0===t?void 0:t.lastName}))),r.a.createElement(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end"},r.a.createElement(o.q,null,r.a.createElement(o.s,{position:"floating"},"Date Joined"),r.a.createElement(o.l,{readonly:!0,value:null===t||void 0===t||null===(e=t.dateJoined)||void 0===e?void 0:e.toString(),displayFormat:"DD-MMM-YYYY"})))),r.a.createElement(o.K,null,r.a.createElement(o.j,{className:"ion-text-center"},r.a.createElement(o.d,{disabled:!0},"Save"),r.a.createElement(o.d,{color:"danger",fill:"outline",className:"ion-margin-start",disabled:!0},r.a.createElement(o.o,{icon:S.L,slot:"start"}),"Discard"))))))}),A=(a(107),function(){var e=Object(n.useContext)(d),t=e.settings,a=e.setDarkMode;return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(q,{title:"Settings"}),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.n,{collapse:"condense"},r.a.createElement(o.T,null,r.a.createElement(o.Q,{size:"large"},"About"))),r.a.createElement(o.t,null,r.a.createElement(o.u,null,r.a.createElement(o.s,null,"General")),r.a.createElement(o.q,{lines:"none",button:!0,onClick:function(){a(!t.darkMode)}},r.a.createElement(o.o,{slot:"start",icon:S.C,className:"component-icon component-icon-dark"}),r.a.createElement(o.s,null,"Dark Mode"),r.a.createElement(o.S,{slot:"end",name:"darkMode",checked:t.darkMode,onIonChange:function(e){a(e.detail.checked)}})),r.a.createElement(o.r,null))))}),R=(a(108),function(){var e=Object(n.useContext)(d).setShowWelcomeScreen,t=Object(n.useRef)(null),a=Object(i.e)();return r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.M,{pager:!0,className:"ion-padding primary-color-background",ref:t},r.a.createElement(o.L,{className:"ion-padding"},r.a.createElement("div",{className:"slide"},r.a.createElement("img",{src:"/assets/icon/icon.png",alt:"logo"}),r.a.createElement("h3",{className:"color-primary"},"GeoNode Mobile Client Brought to you by Cartologic"),r.a.createElement(o.d,{expand:"block",onClick:function(){e(!1),a.replace("/page/home")},className:"ion-margin-top",color:"danger"},"Get Started")))))}),B=function(){return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(q,{title:"About"}),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.n,{collapse:"condense"},r.a.createElement(o.T,null,r.a.createElement(o.Q,{size:"large"},"About"))),r.a.createElement(o.m,null,r.a.createElement(o.K,null,r.a.createElement(o.j,null,r.a.createElement(o.f,null,r.a.createElement(o.q,{lines:"none"},r.a.createElement(o.P,{slot:"start"},r.a.createElement("img",{src:"/assets/icon/icon.png",alt:"logo"})),r.a.createElement(o.s,null,r.a.createElement("h1",null,"GeoNode Mobile Client")," by"," ",r.a.createElement("a",{href:"http://cartologic.com/"},"Cartologic")))))))))},G=(a(109),function(){var e=Object(n.useContext)(y).currentUser,t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(g.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)([]),E=Object(g.a)(p,2),h=E[0],v=E[1],j=Object(n.useState)("-date"),O=Object(g.a)(j,2),k=O[0],x=O[1],N=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t,a,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,d(!0),e.prev=2,e.next=5,w.get("/api/layers",{params:{order_by:k},headers:{Authorization:"Bearer ".concat(t)}});case 5:a=e.sent,n=a.data.objects.map((function(e){return{uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),v(n);case 8:return e.prev=8,d(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[k]);Object(n.useEffect)((function(){e?N(e.accessToken):N()}),[e,N]);var C=function(){var t=Object(b.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,N(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,N();case 7:a.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.e,{slot:"start"},r.a.createElement(o.x,null)),r.a.createElement(o.Q,null,"Layers"),r.a.createElement(o.e,{slot:"secondary"},m&&r.a.createElement(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),r.a.createElement(o.d,{onClick:function(){return c(!0)}},r.a.createElement(o.o,{slot:"icon-only",icon:S.n}))))),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.C,{isOpen:l,cssClass:"my-custom-class",onDidDismiss:function(e){return c(!1)}},r.a.createElement(o.E,{value:k,onIonChange:function(e){return x(e.detail.value)}},r.a.createElement(o.u,null,r.a.createElement(o.s,null,"Sort by")),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most recent"),r.a.createElement(o.D,{slot:"start",value:"-date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Less recent"),r.a.createElement(o.D,{slot:"start",value:"date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"A - Z"),r.a.createElement(o.D,{slot:"start",value:"title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Z - A"),r.a.createElement(o.D,{slot:"start",value:"-title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most popular"),r.a.createElement(o.D,{slot:"start",value:"-popular_count",color:"primary"})))),r.a.createElement(o.F,{slot:"fixed",onIonRefresh:C},r.a.createElement(o.G,null)),r.a.createElement(o.t,null,r.a.createElement(o.u,null,r.a.createElement("h1",null,"".concat(h.length," Layers found"))),h.map((function(e){return r.a.createElement(o.q,{key:e.uuid,href:u.serverBaseURL+e.url,target:"_blank"},r.a.createElement(o.P,{slot:"start",className:"layer-image"},r.a.createElement("img",{src:e.thumbnail,alt:"layer"})),r.a.createElement(o.s,null,r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.abstract),r.a.createElement("p",null,r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.E}),r.a.createElement(o.s,null,e.ownerName))),r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.b}),r.a.createElement(o.s,null,e.date)),r.a.createElement(o.i,{color:"danger"},r.a.createElement(o.o,{icon:S.m}),r.a.createElement(o.s,null,e.viewCount))))})))))}),J=(a(110),function(){var e=Object(n.useContext)(y).currentUser,t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(g.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(g.a)(d,2),E=p[0],h=p[1],v=Object(n.useState)("-date"),j=Object(g.a)(v,2),O=j[0],k=j[1],x=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t,a,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,m(!0),e.prev=2,e.next=5,w.get("/api/maps",{params:{order_by:O},headers:{Authorization:"Bearer ".concat(t)}});case 5:a=e.sent,n=a.data.objects.map((function(e){return{id:e.id,uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),h(n);case 8:return e.prev=8,m(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[O]);Object(n.useEffect)((function(){e?x(e.accessToken):x()}),[e,x]);var N=function(){var t=Object(b.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,x(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,x();case 7:a.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.e,{slot:"start"},r.a.createElement(o.x,null)),r.a.createElement(o.Q,null,"Maps"),r.a.createElement(o.e,{slot:"secondary"},u&&r.a.createElement(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),r.a.createElement(o.d,{onClick:function(){return c(!0)}},r.a.createElement(o.o,{slot:"icon-only",icon:S.n}))))),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.C,{isOpen:l,cssClass:"my-custom-class",onDidDismiss:function(e){return c(!1)}},r.a.createElement(o.E,{value:O,onIonChange:function(e){return k(e.detail.value)}},r.a.createElement(o.u,null,r.a.createElement(o.s,null,"Sort by")),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most recent"),r.a.createElement(o.D,{slot:"start",value:"-date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Less recent"),r.a.createElement(o.D,{slot:"start",value:"date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"A - Z"),r.a.createElement(o.D,{slot:"start",value:"title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Z - A"),r.a.createElement(o.D,{slot:"start",value:"-title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most popular"),r.a.createElement(o.D,{slot:"start",value:"-popular_count",color:"primary"})))),r.a.createElement(o.F,{slot:"fixed",onIonRefresh:N},r.a.createElement(o.G,null)),r.a.createElement(o.t,null,r.a.createElement(o.u,null,r.a.createElement("h1",null,"".concat(E.length," Maps found"))),E.map((function(e){return r.a.createElement(o.q,{key:e.uuid,href:"/page/maps/".concat(e.id)},r.a.createElement(o.P,{slot:"start",className:"map-image"},r.a.createElement("img",{src:e.thumbnail,alt:"map"})),r.a.createElement(o.s,null,r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.abstract),r.a.createElement("p",null,r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.E}),r.a.createElement(o.s,null,e.ownerName))),r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.b}),r.a.createElement(o.s,null,e.date)),r.a.createElement(o.i,{color:"danger"},r.a.createElement(o.o,{icon:S.m}),r.a.createElement(o.s,null,e.viewCount))))})))))}),K=(a(111),function(){var e=Object(n.useContext)(y).currentUser,t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(g.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)([]),E=Object(g.a)(p,2),h=E[0],v=E[1],j=Object(n.useState)("-date"),O=Object(g.a)(j,2),k=O[0],x=O[1],N=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t,a,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,d(!0),e.prev=2,e.next=5,w.get("/api/documents",{params:{order_by:k},headers:{Authorization:"Bearer ".concat(t)}});case 5:a=e.sent,n=a.data.objects.map((function(e){return{uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),v(n);case 8:return e.prev=8,d(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[k]);Object(n.useEffect)((function(){e?N(e.accessToken):N()}),[e,N]);var C=function(){var t=Object(b.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,N(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,N();case 7:a.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(o.B,null,Object(o.cb)("android")&&r.a.createElement(z,null),r.a.createElement(o.n,null,r.a.createElement(o.T,{color:"primary"},r.a.createElement(o.e,{slot:"start"},r.a.createElement(o.x,null)),r.a.createElement(o.Q,null,"Documents"),r.a.createElement(o.e,{slot:"secondary"},m&&r.a.createElement(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),r.a.createElement(o.d,{onClick:function(){return c(!0)}},r.a.createElement(o.o,{slot:"icon-only",icon:S.n}))))),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(o.C,{isOpen:l,cssClass:"my-custom-class",onDidDismiss:function(e){return c(!1)}},r.a.createElement(o.E,{value:k,onIonChange:function(e){return x(e.detail.value)}},r.a.createElement(o.u,null,r.a.createElement(o.s,null,"Sort by")),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most recent"),r.a.createElement(o.D,{slot:"start",value:"-date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Less recent"),r.a.createElement(o.D,{slot:"start",value:"date",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"A - Z"),r.a.createElement(o.D,{slot:"start",value:"title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Z - A"),r.a.createElement(o.D,{slot:"start",value:"-title",color:"primary"})),r.a.createElement(o.q,null,r.a.createElement(o.s,null,"Most popular"),r.a.createElement(o.D,{slot:"start",value:"-popular_count",color:"primary"})))),r.a.createElement(o.F,{slot:"fixed",onIonRefresh:C},r.a.createElement(o.G,null)),r.a.createElement(o.t,null,r.a.createElement(o.u,null,r.a.createElement("h1",null,"".concat(h.length," Documents found"))),h.map((function(e){return r.a.createElement(o.q,{key:e.uuid,href:u.serverBaseURL+e.url,target:"_blank"},r.a.createElement(o.P,{slot:"start",className:"document-image"},r.a.createElement("img",{src:e.thumbnail,alt:"document"})),r.a.createElement(o.s,null,r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.abstract),r.a.createElement("p",null,r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.E}),r.a.createElement(o.s,null,e.ownerName))),r.a.createElement(o.i,{color:"primary"},r.a.createElement(o.o,{icon:S.b}),r.a.createElement(o.s,null,e.date)),r.a.createElement(o.i,{color:"danger"},r.a.createElement(o.o,{icon:S.m}),r.a.createElement(o.s,null,e.viewCount))))})))))}),P=function(){var e=Object(i.g)().mapId,t=Object(n.useState)(""),a=Object(g.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){w.get("/api/maps",{params:{id:e}}).then((function(e){c(e.data.objects[0].title)}))}),[e]),r.a.createElement(o.k,{fullscreen:!0},r.a.createElement(q,{title:l}),r.a.createElement("iframe",{title:"Map View",width:"100%",height:"90%",src:"https://summit2020.cartoview.net/maps/".concat(e,"/embed")}))},F=function(){var e=Object(n.useContext)(d),t=e.initializeGeneralContext,a=e.settings,l=Object(n.useContext)(y).initializeAuthenticationContext;return Object(n.useEffect)((function(){t(),l()}),[l,t]),r.a.createElement(o.a,null,r.a.createElement(_,null),r.a.createElement(s.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(o.N,null)},r.a.createElement(o.O,{contentId:"main-menu"},r.a.createElement(L,null),r.a.createElement(o.J,{id:"main-menu"},r.a.createElement(i.b,{path:"/page/home",component:T,exact:!0}),r.a.createElement(i.b,{path:"/page/settings",component:A,exact:!0}),r.a.createElement(i.b,{path:"/page/profile",component:U,exact:!0}),r.a.createElement(i.b,{path:"/page/about",component:B,exact:!0}),r.a.createElement(i.b,{path:"/page/layers",component:G,exact:!0}),r.a.createElement(i.b,{path:"/page/maps",component:J,exact:!0}),r.a.createElement(i.b,{path:"/page/maps/:mapId",component:P,exact:!0}),r.a.createElement(i.b,{path:"/page/documents",component:K,exact:!0}),r.a.createElement(i.b,{path:"/page/welcome",component:R,exact:!0}),r.a.createElement(i.a,{from:"/",to:a.showWelcomeScreen?"/page/welcome":"/page/home",exact:!0}))))))},W=(a(112),r.a.createElement(j,null,r.a.createElement(C,null,r.a.createElement(F,null))));c.a.render(W,document.getElementById("root"))},65:function(e){e.exports=JSON.parse('{"name":"geonode-mobile-sample","description":"A sample cross platform mobile app that leverages GeoNode as a back-end","version":"0.1.0","private":false,"dependencies":{"@capacitor/android":"^2.4.4","@capacitor/core":"2.4.4","@ionic/react":"^5.0.7","@ionic/react-router":"^5.0.7","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^8.0.3","@types/jest":"^24.0.25","@types/node":"^12.12.24","@types/react":"^16.9.17","@types/react-dom":"^16.9.4","@types/react-router":"^5.1.4","@types/react-router-dom":"^5.1.3","axios":"^0.21.0","ionicons":"^5.0.0","react":"^16.13.0","react-dom":"^16.13.0","react-router":"^5.1.2","react-router-dom":"^5.1.2","react-scripts":"3.4.0","typescript":"3.8.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@capacitor/cli":"2.4.4"}}')},69:function(e,t,a){e.exports=a(113)},75:function(e,t,a){var n={"./ion-action-sheet.entry.js":[115,5],"./ion-alert.entry.js":[116,6],"./ion-app_8.entry.js":[117,7],"./ion-avatar_3.entry.js":[118,17],"./ion-back-button.entry.js":[119,18],"./ion-backdrop.entry.js":[120,43],"./ion-button_2.entry.js":[121,19],"./ion-card_5.entry.js":[122,20],"./ion-checkbox.entry.js":[123,21],"./ion-chip.entry.js":[124,22],"./ion-col_3.entry.js":[125,44],"./ion-datetime_3.entry.js":[126,10],"./ion-fab_3.entry.js":[127,23],"./ion-img.entry.js":[128,45],"./ion-infinite-scroll_2.entry.js":[129,46],"./ion-input.entry.js":[130,24],"./ion-item-option_3.entry.js":[131,25],"./ion-item_8.entry.js":[132,26],"./ion-loading.entry.js":[133,27],"./ion-menu_3.entry.js":[134,28],"./ion-modal.entry.js":[135,8],"./ion-nav_2.entry.js":[136,14],"./ion-popover.entry.js":[137,9],"./ion-progress-bar.entry.js":[138,29],"./ion-radio_2.entry.js":[139,30],"./ion-range.entry.js":[140,31],"./ion-refresher_2.entry.js":[141,11],"./ion-reorder_2.entry.js":[142,16],"./ion-ripple-effect.entry.js":[143,47],"./ion-route_4.entry.js":[144,32],"./ion-searchbar.entry.js":[145,33],"./ion-segment_2.entry.js":[146,34],"./ion-select_3.entry.js":[147,35],"./ion-slide_2.entry.js":[148,48],"./ion-spinner.entry.js":[149,13],"./ion-split-pane.entry.js":[150,49],"./ion-tab-bar_2.entry.js":[151,36],"./ion-tab_2.entry.js":[152,15],"./ion-text.entry.js":[153,37],"./ion-textarea.entry.js":[154,38],"./ion-toast.entry.js":[155,39],"./ion-toggle.entry.js":[156,12],"./ion-virtual-scroll.entry.js":[157,50]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=75,e.exports=r},77:function(e,t,a){var n={"./ion-icon.entry.js":[159,57]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=77,e.exports=r}},[[69,3,4]]]);
//# sourceMappingURL=main.d21b3ee4.chunk.js.map