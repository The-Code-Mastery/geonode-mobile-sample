(this["webpackJsonpgeonode-mobile-sample"]=this["webpackJsonpgeonode-mobile-sample"]||[]).push([[1],{104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(2),r=n.n(s),a=n(36),i=n.n(a),o=n(1),l=n(62),j=n(23),d={defaultDarkMode:!1,serverBaseURL:"https://summit2020.cartoview.net",profileURL:"api/profiles/",authenticationURL:"o/token/",authenticationType:"password",authenticationClientId:"2DkWeRYRYCwidWqtwlA9IvL0AJMoZB6S8iJFLfU2",authenticationClientSecret:"8OsZciU4N4lkqyBHKFiEJQJuhjTnqzFZeoWsIofIEUTvxQUFu9FDRv2NelHikiGr3M47RpInANd27L862gPtjUWYbX276dQ2qlXDvRIvoob6LvMKNVu4veYieqKMt8tO",logoutURL:"o/revoke_token/"},u={darkMode:d.defaultDarkMode,showWelcomeScreen:!0},b=r.a.createContext({settings:u,showLoginModal:!1,initializeGeneralContext:function(){},setDarkMode:function(){},setShowWelcomeScreen:function(){},setShowLoginModal:function(){}}),O=n(35),x=n(4),h=n.n(x),p=n(9),m=n(7),f=n(28),g=f.a.Storage,v=function(e){var t=Object(s.useState)(u),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(!1),o=Object(m.a)(i,2),l=o[0],j=o[1];Object(s.useEffect)((function(){g.set({key:"settings",value:JSON.stringify(r)})}),[r]);var d=Object(s.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get({key:"settings"});case 2:t=e.sent,n=t.value?JSON.parse(t.value):u,a(n),x(n.darkMode),f(n.showWelcomeScreen);case 7:case"end":return e.stop()}}),e)}))),[]),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.darkMode;document.body.classList.toggle("dark",e);var t={darkMode:e};a((function(e){return Object(O.a)(Object(O.a)({},e),t)}))},f=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={showWelcomeScreen:e};a((function(e){return Object(O.a)(Object(O.a)({},e),t)}))};return Object(c.jsx)(b.Provider,{value:{settings:r,showLoginModal:l,initializeGeneralContext:d,setDarkMode:x,setShowWelcomeScreen:f,setShowLoginModal:j},children:e.children})},y=r.a.createContext({currentUser:null,loginHandler:function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logoutHandler:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),initializeAuthenticationContext:function(){}}),k=n(45),w=n.n(k),N=n(65),C=n.n(N).a.create({baseURL:d.serverBaseURL}),S=f.a.Storage,_=function(e){var t=Object(s.useState)(null),n=Object(m.a)(t,2),r=n[0],a=n[1];Object(s.useEffect)((function(){S.set({key:"authentication",value:JSON.stringify(r)})}),[r]);var i=Object(s.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get({key:"authentication"});case 2:t=e.sent,n=t.value?JSON.parse(t.value):null,a(n);case 5:case"end":return e.stop()}}),e)}))),[]),o=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var c,s,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={client_id:d.authenticationClientId,client_secret:d.authenticationClientSecret,grant_type:d.authenticationType,username:t,password:n},e.prev=1,e.next=4,C.post(d.authenticationURL,w.a.stringify(c),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return s=e.sent,e.next=7,C.get(d.profileURL,{params:{username:t}});case 7:return r=e.sent,i=r.data.objects[0],o={username:t,firstName:i.first_name,lastName:i.last_name,id:i.id,avatar:i.avatar_100,dateJoined:new Date(i.date_joined),accessToken:s.data.access_token,refreshToken:s.data.refresh_token,expires:null},a(o),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={client_id:d.authenticationClientId,client_secret:d.authenticationClientSecret,token:null===r||void 0===r?void 0:r.accessToken},e.prev=1,e.next=4,C.post(d.logoutURL,w.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return a(null),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(y.Provider,{value:{currentUser:r,loginHandler:o,logoutHandler:l,initializeAuthenticationContext:i},children:e.children})},D=n(5),M=(n(104),function(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(m.a)(a,2),l=i[0],j=i[1],d=Object(s.useContext)(y).loginHandler,u=Object(s.useContext)(b),O=u.showLoginModal,x=u.setShowLoginModal,f=Object(s.useRef)(null),g=Object(s.useRef)(null),v=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.current.value,n=g.current.value,t&&n&&0!==t.toString().trim().length&&0!==n.toString().trim().length){e.next=5;break}return r("Please enter valid data"),e.abrupt("return");case 5:return r(""),j(!0),e.next=9,d(t.toString(),n.toString());case 9:c=e.sent,j(!1),c?x(!1):r("Failed to login");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(o.z,{isOpen:O,children:[Object(c.jsx)(o.v,{isOpen:l,message:"Please wait..."}),Object(c.jsx)(o.R,{isOpen:!!n,onDidDismiss:function(){return r("")},message:n,duration:2e3}),Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.Q,{children:"Login"}),Object(c.jsx)(o.e,{slot:"end",children:Object(c.jsx)(o.d,{onClick:function(){return x(!1)},children:"Close"})})]})}),Object(c.jsx)(o.k,{children:Object(c.jsxs)(o.m,{className:"ion-padding",children:[Object(c.jsxs)(o.K,{children:[Object(c.jsx)(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end",children:Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{position:"floating",children:"Username"}),Object(c.jsx)(o.p,{ref:f,type:"text"})]})}),Object(c.jsx)(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end",children:Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{position:"floating",children:"Password"}),Object(c.jsx)(o.p,{ref:g,type:"password"})]})})]}),Object(c.jsx)(o.K,{className:"ion-margin-top",children:Object(c.jsx)(o.j,{offset:"3",size:"6",className:"ion-text-center",children:Object(c.jsxs)(o.d,{expand:"block",onClick:v,children:[Object(c.jsx)(o.o,{slot:"start",icon:D.D}),"Login"]})})}),Object(c.jsxs)(o.K,{children:[Object(c.jsx)(o.j,{sizeXs:"12",className:"ion-text-center ion-margin-top",children:Object(c.jsx)(o.s,{children:"If you don't have an account yet"})}),Object(c.jsx)(o.j,{sizeXs:"12",className:"ion-text-center",children:Object(c.jsx)(o.d,{disabled:!0,fill:"clear",children:"Register Now"})})]}),Object(c.jsx)(o.K,{className:"ion-margin-top",children:Object(c.jsx)(o.j,{offset:"3",size:"6",className:"ion-text-center",children:Object(c.jsxs)(o.d,{fill:"outline",onClick:function(){return x(!1)},children:[Object(c.jsx)(o.o,{slot:"start",icon:D.h}),"Close"]})})})]})})]})}),L=(n(105),n(66)),q=[{title:"Home",url:"/page/home",iosIcon:D.o,mdIcon:D.p},{title:"Layers",url:"/page/layers",iosIcon:D.s,mdIcon:D.t},{title:"Maps",url:"/page/maps",iosIcon:D.y,mdIcon:D.z},{title:"Documents",url:"/page/documents",iosIcon:D.k,mdIcon:D.l},{title:"Settings",url:"/page/settings",iosIcon:D.J,mdIcon:D.K},{title:"About",url:"/page/about",iosIcon:D.q,mdIcon:D.r}],I=function(){var e=Object(s.useContext)(y),t=e.currentUser,n=e.logoutHandler,r=Object(s.useContext)(b).setShowLoginModal,a=Object(s.useState)(!1),i=Object(m.a)(a,2),l=i[0],d=i[1],u=Object(j.f)(),O=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n();case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(o.w,{contentId:"main-menu",type:"overlay",children:[Object(c.jsxs)(o.k,{children:[Object(c.jsx)(o.v,{isOpen:l,message:"Please wait..."}),Object(c.jsxs)(o.m,{className:"cover-background",children:[Object(c.jsx)(o.K,{className:"ion-justify-content-center ion-margin-top",children:t?Object(c.jsx)(o.I,{href:"/page/profile",children:Object(c.jsx)("img",{src:t.avatar,alt:"profile",className:"user-thumbnail"})}):Object(c.jsx)("img",{src:"/assets/img/avatar.svg",alt:"profile",className:"user-thumbnail"})}),Object(c.jsx)(o.K,{className:"ion-justify-content-center ion-margin-top",children:Object(c.jsx)("h1",{className:"ion-no-margin color-white",children:null===t||void 0===t?void 0:t.username})})]}),Object(c.jsxs)(o.t,{id:"inbox-list",children:[!t&&Object(c.jsxs)(o.q,{className:"ion-margin-bottom",lines:"none",detail:!1,onClick:function(){return r(!0)},children:[Object(c.jsx)(o.o,{className:"ion-padding-start",slot:"start",ios:D.u,md:D.v}),Object(c.jsx)(o.s,{children:"Login"})]}),q.map((function(e,t){return Object(c.jsx)(o.y,{autoHide:!1,children:Object(c.jsxs)(o.q,{className:u.pathname===e.url?"selected":"",routerLink:e.url,routerDirection:"none",lines:"none",detail:!1,children:[Object(c.jsx)(o.o,{className:"ion-padding-start",slot:"start",ios:e.iosIcon,md:e.mdIcon}),Object(c.jsx)(o.s,{children:e.title})]})},t)})),t&&Object(c.jsxs)(o.q,{className:"ion-margin-top",lines:"none",detail:!1,onClick:O,children:[Object(c.jsx)(o.o,{className:"ion-padding-start",slot:"start",ios:D.w,md:D.x}),Object(c.jsx)(o.s,{children:"Logout"})]})]})]}),Object(c.jsx)(o.A,{className:"ion-margin-start",children:"version: "+L.version})]})},z=function(e){return Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.e,{slot:"start",children:Object(c.jsx)(o.b,{defaultHref:"/page/home"})}),Object(c.jsx)(o.Q,{children:e.title})]})})},T=f.a.App,U=function(){var e=Object(j.f)(),t=Object(j.e)(),n=Object(s.useState)(!1),r=Object(m.a)(n,2),a=r[0],i=r[1],l=Object(s.useState)(!1),d=Object(m.a)(l,2),u=d[0],b=d[1];return Object(s.useEffect)((function(){document.addEventListener("ionBackButton",(function(e){e.detail.register(-1,(function(){t.goBack(),setTimeout((function(){return b(!1)}),1500),u?T.exitApp():(b(!0),i(!0))}))}))}),[e,t,u]),Object(c.jsx)(o.R,{isOpen:a,onDidDismiss:function(){return i(!1)},message:"Press again to Exit",duration:1500})},A=(n(106),function(){var e=Object(s.useContext)(y).currentUser,t=Object(s.useContext)(b).setShowLoginModal,n=Object(s.useState)(!1),r=Object(m.a)(n,2),a=r[0],i=r[1],l=Object(s.useState)(0),j=Object(m.a)(l,2),d=j[0],u=j[1],O=Object(s.useState)(0),x=Object(m.a)(O,2),f=x[0],g=x[1],v=Object(s.useState)(0),k=Object(m.a)(v,2),w=k[0],N=k[1],S=Object(s.useState)(0),_=Object(m.a)(S,2),M=_[0],L=_[1],q=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,c,s,r,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,i(!0),e.prev=2,e.next=5,C.get("/api/layers",{headers:{Authorization:"Bearer ".concat(t)}});case 5:return n=e.sent,e.next=8,C.get("/api/maps",{headers:{Authorization:"Bearer ".concat(t)}});case 8:return c=e.sent,e.next=11,C.get("/api/documents",{headers:{Authorization:"Bearer ".concat(t)}});case 11:return s=e.sent,e.next=14,C.get("/api/profiles",{headers:{Authorization:"Bearer ".concat(t)}});case 14:r=e.sent,u(n.data.meta.total_count),g(c.data.meta.total_count),N(s.data.meta.total_count),L(r.data.meta.total_count);case 19:return e.prev=19,i(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,,19,22]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){e?q(e.accessToken):q()}),[e]);var I=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,q(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,q();case 7:n.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.e,{slot:"start",children:Object(c.jsx)(o.x,{})}),Object(c.jsx)(o.Q,{children:"GeoNode Mobile"}),a&&Object(c.jsx)(o.N,{slot:"end",color:"light",className:"ion-margin-end"})]})}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.F,{slot:"fixed",onIonRefresh:I,children:Object(c.jsx)(o.G,{})}),Object(c.jsxs)(o.q,{lines:"none",children:[Object(c.jsx)("h1",{slot:"start",children:Object(c.jsx)(o.i,{color:"danger",outline:!0,className:"welcome-title ion-no-margin",children:"Welcome"})}),!e&&Object(c.jsx)(o.i,{slot:"end",color:"primary",onClick:function(){return t(!0)},className:"ion-no-margin",children:"Login"})]}),Object(c.jsx)(o.q,{lines:"none",children:"GeoNode is an open source platform for sharing geospatial data and maps."}),Object(c.jsxs)(o.f,{children:[Object(c.jsx)(o.h,{children:Object(c.jsxs)(o.q,{lines:"none",className:"ion-no-padding",href:"/page/layers",children:[Object(c.jsxs)(o.i,{slot:"start",color:"primary",children:[Object(c.jsx)(o.o,{icon:D.s}),Object(c.jsx)(o.s,{children:"Layers"})]}),Object(c.jsx)(o.c,{slot:"end",children:d})]})}),Object(c.jsx)(o.g,{children:"Geospatial data published by other users, organizations and public sources. Download data in standard formats."})]}),Object(c.jsxs)(o.f,{children:[Object(c.jsx)(o.h,{children:Object(c.jsxs)(o.q,{lines:"none",className:"ion-no-padding",href:"/page/maps",children:[Object(c.jsxs)(o.i,{slot:"start",color:"primary",children:[Object(c.jsx)(o.o,{icon:D.y}),Object(c.jsx)(o.s,{children:"Maps"})]}),Object(c.jsx)(o.c,{slot:"end",children:f})]})}),Object(c.jsx)(o.g,{children:"Data is available for browsing, aggregating and styling to generate maps which can be saved, downloaded, shared publicly or restricted to specify users only."})]}),Object(c.jsxs)(o.f,{children:[Object(c.jsx)(o.h,{children:Object(c.jsxs)(o.q,{lines:"none",className:"ion-no-padding",href:"/page/documents",children:[Object(c.jsxs)(o.i,{slot:"start",color:"primary",children:[Object(c.jsx)(o.o,{icon:D.k}),Object(c.jsx)(o.s,{children:"Documents"})]}),Object(c.jsx)(o.c,{slot:"end",children:w})]})}),Object(c.jsx)(o.g,{children:"As for the layers and maps GeoNode allows to publish tabular and text data, manage theirs metadata and associated documents."})]}),Object(c.jsxs)(o.f,{children:[Object(c.jsx)(o.h,{children:Object(c.jsxs)(o.q,{lines:"none",className:"ion-no-padding",children:[Object(c.jsxs)(o.i,{slot:"start",color:"primary",children:[Object(c.jsx)(o.o,{icon:D.E}),Object(c.jsx)(o.s,{children:"Users"})]}),Object(c.jsx)(o.c,{slot:"end",children:M})]})}),Object(c.jsx)(o.g,{children:"Geonode allows registered users to easily upload geospatial data and various documents in several formats."})]})]})]})}),R=(n(107),function(){var e,t=Object(s.useContext)(y).currentUser;return Object(c.jsxs)(o.B,{children:[Object(c.jsx)(z,{title:"Profile"}),Object(c.jsx)(o.k,{children:Object(c.jsxs)(o.m,{className:"ion-margin-top",children:[Object(c.jsx)(o.K,{children:Object(c.jsx)(o.j,{className:"ion-text-center",children:Object(c.jsx)("img",{className:"profile-picture",src:null===t||void 0===t?void 0:t.avatar,alt:"profile"})})}),Object(c.jsx)(o.K,{children:Object(c.jsxs)(o.j,{className:"ion-text-center",children:[Object(c.jsxs)(o.d,{fill:"outline",children:[Object(c.jsx)(o.o,{icon:D.j,slot:"start"}),"Upload"]}),Object(c.jsxs)(o.d,{fill:"outline",children:[Object(c.jsx)(o.o,{icon:D.c,slot:"start"}),"Camera"]})]})}),Object(c.jsxs)(o.K,{className:"ion-margin-start ion-margin-end",children:[Object(c.jsx)(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end",children:Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{position:"floating",children:"First Name"}),Object(c.jsx)(o.p,{readonly:!0,type:"text",value:null===t||void 0===t?void 0:t.firstName})]})}),Object(c.jsx)(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end",children:Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{position:"floating",children:"Last Name"}),Object(c.jsx)(o.p,{readonly:!0,type:"text",value:null===t||void 0===t?void 0:t.lastName})]})}),Object(c.jsx)(o.j,{sizeXs:"12",sizeMd:"6",className:"ion-padding-start ion-padding-end",children:Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{position:"floating",children:"Date Joined"}),Object(c.jsx)(o.l,{readonly:!0,value:null===t||void 0===t||null===(e=t.dateJoined)||void 0===e?void 0:e.toString(),displayFormat:"DD-MMM-YYYY"})]})})]}),Object(c.jsx)(o.K,{children:Object(c.jsxs)(o.j,{className:"ion-text-center",children:[Object(c.jsx)(o.d,{disabled:!0,children:"Save"}),Object(c.jsxs)(o.d,{color:"danger",fill:"outline",className:"ion-margin-start",disabled:!0,children:[Object(c.jsx)(o.o,{icon:D.L,slot:"start"}),"Discard"]})]})})]})})]})}),B=(n(108),function(){var e=Object(s.useContext)(b),t=e.settings,n=e.setDarkMode;return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(z,{title:"Settings"}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.n,{collapse:"condense",children:Object(c.jsx)(o.T,{children:Object(c.jsx)(o.Q,{size:"large",children:"About"})})}),Object(c.jsxs)(o.t,{children:[Object(c.jsx)(o.u,{children:Object(c.jsx)(o.s,{children:"General"})}),Object(c.jsxs)(o.q,{lines:"none",button:!0,onClick:function(){n(!t.darkMode)},children:[Object(c.jsx)(o.o,{slot:"start",icon:D.C,className:"component-icon component-icon-dark"}),Object(c.jsx)(o.s,{children:"Dark Mode"}),Object(c.jsx)(o.S,{slot:"end",name:"darkMode",checked:t.darkMode,onIonChange:function(e){n(e.detail.checked)}})]}),Object(c.jsx)(o.r,{})]})]})]})}),E=(n(109),function(){var e=Object(s.useContext)(b).setShowWelcomeScreen,t=Object(s.useRef)(null),n=Object(j.e)();return Object(c.jsx)(o.k,{fullscreen:!0,children:Object(c.jsx)(o.M,{pager:!0,className:"ion-padding primary-color-background",ref:t,children:Object(c.jsx)(o.L,{className:"ion-padding",children:Object(c.jsxs)("div",{className:"slide",children:[Object(c.jsx)("img",{src:"/assets/icon/icon.png",alt:"logo"}),Object(c.jsx)("h3",{className:"color-primary",children:"GeoNode Mobile Client Brought to you by Cartologic"}),Object(c.jsx)(o.d,{expand:"block",onClick:function(){e(!1),n.replace("/page/home")},className:"ion-margin-top",color:"danger",children:"Get Started"})]})})})})}),G=function(){return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(z,{title:"About"}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.n,{collapse:"condense",children:Object(c.jsx)(o.T,{children:Object(c.jsx)(o.Q,{size:"large",children:"About"})})}),Object(c.jsx)(o.m,{children:Object(c.jsx)(o.K,{children:Object(c.jsx)(o.j,{children:Object(c.jsx)(o.f,{children:Object(c.jsxs)(o.q,{lines:"none",children:[Object(c.jsx)(o.P,{slot:"start",children:Object(c.jsx)("img",{src:"/assets/icon/icon.png",alt:"logo"})}),Object(c.jsxs)(o.s,{children:[Object(c.jsx)("h1",{children:"GeoNode Mobile Client"})," by"," ",Object(c.jsx)("a",{href:"http://cartologic.com/",children:"Cartologic"})]})]})})})})})]})]})},J=(n(110),function(){var e=Object(s.useContext)(y).currentUser,t=Object(s.useState)(!1),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(!1),l=Object(m.a)(i,2),j=l[0],u=l[1],b=Object(s.useState)([]),O=Object(m.a)(b,2),x=O[0],f=O[1],g=Object(s.useState)("-date"),v=Object(m.a)(g,2),k=v[0],w=v[1],N=Object(s.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n,c,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,u(!0),e.prev=2,e.next=5,C.get("/api/layers",{params:{order_by:k},headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,c=n.data.objects.map((function(e){return{uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),f(c);case 8:return e.prev=8,u(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[k]);Object(s.useEffect)((function(){e?N(e.accessToken):N()}),[e,N]);var S=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,N(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,N();case 7:n.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.e,{slot:"start",children:Object(c.jsx)(o.x,{})}),Object(c.jsx)(o.Q,{children:"Layers"}),Object(c.jsxs)(o.e,{slot:"secondary",children:[j&&Object(c.jsx)(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),Object(c.jsx)(o.d,{onClick:function(){return a(!0)},children:Object(c.jsx)(o.o,{slot:"icon-only",icon:D.n})})]})]})}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.C,{isOpen:r,cssClass:"my-custom-class",onDidDismiss:function(e){return a(!1)},children:Object(c.jsxs)(o.E,{value:k,onIonChange:function(e){return w(e.detail.value)},children:[Object(c.jsx)(o.u,{children:Object(c.jsx)(o.s,{children:"Sort by"})}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most recent"}),Object(c.jsx)(o.D,{slot:"start",value:"-date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Less recent"}),Object(c.jsx)(o.D,{slot:"start",value:"date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"A - Z"}),Object(c.jsx)(o.D,{slot:"start",value:"title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Z - A"}),Object(c.jsx)(o.D,{slot:"start",value:"-title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most popular"}),Object(c.jsx)(o.D,{slot:"start",value:"-popular_count",color:"primary"})]})]})}),Object(c.jsx)(o.F,{slot:"fixed",onIonRefresh:S,children:Object(c.jsx)(o.G,{})}),Object(c.jsxs)(o.t,{children:[Object(c.jsx)(o.u,{children:Object(c.jsx)("h1",{children:"".concat(x.length," Layers found")})}),x.map((function(e){return Object(c.jsxs)(o.q,{href:d.serverBaseURL+e.url,target:"_blank",children:[Object(c.jsx)(o.P,{slot:"start",className:"layer-image",children:Object(c.jsx)("img",{src:e.thumbnail,alt:"layer"})}),Object(c.jsxs)(o.s,{children:[Object(c.jsx)("h2",{children:e.title}),Object(c.jsx)("p",{children:e.abstract}),Object(c.jsx)("p",{children:Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.E}),Object(c.jsx)(o.s,{children:e.ownerName})]})}),Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.b}),Object(c.jsx)(o.s,{children:e.date})]}),Object(c.jsxs)(o.i,{color:"danger",children:[Object(c.jsx)(o.o,{icon:D.m}),Object(c.jsx)(o.s,{children:e.viewCount})]})]})]},e.uuid)}))]})]})]})}),K=(n(111),function(){var e=Object(s.useContext)(y).currentUser,t=Object(s.useState)(!1),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(!1),l=Object(m.a)(i,2),j=l[0],d=l[1],u=Object(s.useState)([]),b=Object(m.a)(u,2),O=b[0],x=b[1],f=Object(s.useState)("-date"),g=Object(m.a)(f,2),v=g[0],k=g[1],w=Object(s.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n,c,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,d(!0),e.prev=2,e.next=5,C.get("/api/maps",{params:{order_by:v},headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,c=n.data.objects.map((function(e){return{id:e.id,uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),x(c);case 8:return e.prev=8,d(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[v]);Object(s.useEffect)((function(){e?w(e.accessToken):w()}),[e,w]);var N=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,w(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,w();case 7:n.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.e,{slot:"start",children:Object(c.jsx)(o.x,{})}),Object(c.jsx)(o.Q,{children:"Maps"}),Object(c.jsxs)(o.e,{slot:"secondary",children:[j&&Object(c.jsx)(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),Object(c.jsx)(o.d,{onClick:function(){return a(!0)},children:Object(c.jsx)(o.o,{slot:"icon-only",icon:D.n})})]})]})}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.C,{isOpen:r,cssClass:"my-custom-class",onDidDismiss:function(e){return a(!1)},children:Object(c.jsxs)(o.E,{value:v,onIonChange:function(e){return k(e.detail.value)},children:[Object(c.jsx)(o.u,{children:Object(c.jsx)(o.s,{children:"Sort by"})}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most recent"}),Object(c.jsx)(o.D,{slot:"start",value:"-date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Less recent"}),Object(c.jsx)(o.D,{slot:"start",value:"date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"A - Z"}),Object(c.jsx)(o.D,{slot:"start",value:"title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Z - A"}),Object(c.jsx)(o.D,{slot:"start",value:"-title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most popular"}),Object(c.jsx)(o.D,{slot:"start",value:"-popular_count",color:"primary"})]})]})}),Object(c.jsx)(o.F,{slot:"fixed",onIonRefresh:N,children:Object(c.jsx)(o.G,{})}),Object(c.jsxs)(o.t,{children:[Object(c.jsx)(o.u,{children:Object(c.jsx)("h1",{children:"".concat(O.length," Maps found")})}),O.map((function(e){return Object(c.jsxs)(o.q,{href:"/page/maps/".concat(e.id),children:[Object(c.jsx)(o.P,{slot:"start",className:"map-image",children:Object(c.jsx)("img",{src:e.thumbnail,alt:"map"})}),Object(c.jsxs)(o.s,{children:[Object(c.jsx)("h2",{children:e.title}),Object(c.jsx)("p",{children:e.abstract}),Object(c.jsx)("p",{children:Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.E}),Object(c.jsx)(o.s,{children:e.ownerName})]})}),Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.b}),Object(c.jsx)(o.s,{children:e.date})]}),Object(c.jsxs)(o.i,{color:"danger",children:[Object(c.jsx)(o.o,{icon:D.m}),Object(c.jsx)(o.s,{children:e.viewCount})]})]})]},e.uuid)}))]})]})]})}),P=(n(112),function(){var e=Object(s.useContext)(y).currentUser,t=Object(s.useState)(!1),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(!1),l=Object(m.a)(i,2),j=l[0],u=l[1],b=Object(s.useState)([]),O=Object(m.a)(b,2),x=O[0],f=O[1],g=Object(s.useState)("-date"),v=Object(m.a)(g,2),k=v[0],w=v[1],N=Object(s.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n,c,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,u(!0),e.prev=2,e.next=5,C.get("/api/documents",{params:{order_by:k},headers:{Authorization:"Bearer ".concat(t)}});case 5:n=e.sent,c=n.data.objects.map((function(e){return{uuid:e.uuid,title:e.title,abstract:e.abstract,thumbnail:e.thumbnail_url,date:e.date.split("T")[0],url:e.detail_url,viewCount:e.popular_count,ownerName:e.owner_name}})),f(c);case 8:return e.prev=8,u(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])}))),[k]);Object(s.useEffect)((function(){e?N(e.accessToken):N()}),[e,N]);var S=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,N(e.accessToken);case 3:t.next=7;break;case 5:return t.next=7,N();case 7:n.detail.complete();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(o.B,{children:[Object(o.cb)("android")&&Object(c.jsx)(U,{}),Object(c.jsx)(o.n,{children:Object(c.jsxs)(o.T,{color:"primary",children:[Object(c.jsx)(o.e,{slot:"start",children:Object(c.jsx)(o.x,{})}),Object(c.jsx)(o.Q,{children:"Documents"}),Object(c.jsxs)(o.e,{slot:"secondary",children:[j&&Object(c.jsx)(o.N,{slot:"end",color:"light",className:"ion-margin-end"}),Object(c.jsx)(o.d,{onClick:function(){return a(!0)},children:Object(c.jsx)(o.o,{slot:"icon-only",icon:D.n})})]})]})}),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(o.C,{isOpen:r,cssClass:"my-custom-class",onDidDismiss:function(e){return a(!1)},children:Object(c.jsxs)(o.E,{value:k,onIonChange:function(e){return w(e.detail.value)},children:[Object(c.jsx)(o.u,{children:Object(c.jsx)(o.s,{children:"Sort by"})}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most recent"}),Object(c.jsx)(o.D,{slot:"start",value:"-date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Less recent"}),Object(c.jsx)(o.D,{slot:"start",value:"date",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"A - Z"}),Object(c.jsx)(o.D,{slot:"start",value:"title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Z - A"}),Object(c.jsx)(o.D,{slot:"start",value:"-title",color:"primary"})]}),Object(c.jsxs)(o.q,{children:[Object(c.jsx)(o.s,{children:"Most popular"}),Object(c.jsx)(o.D,{slot:"start",value:"-popular_count",color:"primary"})]})]})}),Object(c.jsx)(o.F,{slot:"fixed",onIonRefresh:S,children:Object(c.jsx)(o.G,{})}),Object(c.jsxs)(o.t,{children:[Object(c.jsx)(o.u,{children:Object(c.jsx)("h1",{children:"".concat(x.length," Documents found")})}),x.map((function(e){return Object(c.jsxs)(o.q,{href:d.serverBaseURL+e.url,target:"_blank",children:[Object(c.jsx)(o.P,{slot:"start",className:"document-image",children:Object(c.jsx)("img",{src:e.thumbnail,alt:"document"})}),Object(c.jsxs)(o.s,{children:[Object(c.jsx)("h2",{children:e.title}),Object(c.jsx)("p",{children:e.abstract}),Object(c.jsx)("p",{children:Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.E}),Object(c.jsx)(o.s,{children:e.ownerName})]})}),Object(c.jsxs)(o.i,{color:"primary",children:[Object(c.jsx)(o.o,{icon:D.b}),Object(c.jsx)(o.s,{children:e.date})]}),Object(c.jsxs)(o.i,{color:"danger",children:[Object(c.jsx)(o.o,{icon:D.m}),Object(c.jsx)(o.s,{children:e.viewCount})]})]})]},e.uuid)}))]})]})]})}),F=function(){var e=Object(j.g)().mapId,t=Object(s.useState)(""),n=Object(m.a)(t,2),r=n[0],a=n[1];return Object(s.useEffect)((function(){C.get("/api/maps",{params:{id:e}}).then((function(e){a(e.data.objects[0].title)}))}),[e]),Object(c.jsxs)(o.k,{fullscreen:!0,children:[Object(c.jsx)(z,{title:r}),Object(c.jsx)("iframe",{title:"Map View",width:"100%",height:"90%",src:"https://summit2020.cartoview.net/maps/".concat(e,"/embed")})]})},W=function(){var e=Object(s.useContext)(b),t=e.initializeGeneralContext,n=e.settings,r=Object(s.useContext)(y).initializeAuthenticationContext;return Object(s.useEffect)((function(){t(),r()}),[r,t]),Object(c.jsxs)(o.a,{children:[Object(c.jsx)(M,{}),Object(c.jsx)(l.a,{children:Object(c.jsx)(s.Suspense,{fallback:Object(c.jsx)(o.N,{}),children:Object(c.jsxs)(o.O,{contentId:"main-menu",children:[Object(c.jsx)(I,{}),Object(c.jsxs)(o.J,{id:"main-menu",children:[Object(c.jsx)(j.b,{path:"/page/home",component:A,exact:!0}),Object(c.jsx)(j.b,{path:"/page/settings",component:B,exact:!0}),Object(c.jsx)(j.b,{path:"/page/profile",component:R,exact:!0}),Object(c.jsx)(j.b,{path:"/page/about",component:G,exact:!0}),Object(c.jsx)(j.b,{path:"/page/layers",component:J,exact:!0}),Object(c.jsx)(j.b,{path:"/page/maps",component:K,exact:!0}),Object(c.jsx)(j.b,{path:"/page/maps/:mapId",component:F,exact:!0}),Object(c.jsx)(j.b,{path:"/page/documents",component:P,exact:!0}),Object(c.jsx)(j.b,{path:"/page/welcome",component:E,exact:!0}),Object(c.jsx)(j.a,{from:"/",to:n.showWelcomeScreen?"/page/welcome":"/page/home",exact:!0})]})]})})})]})},H=(n(113),Object(c.jsx)(v,{children:Object(c.jsx)(_,{children:Object(c.jsx)(W,{})})}));i.a.render(H,document.getElementById("root"))},66:function(e){e.exports=JSON.parse('{"name":"geonode-mobile-sample","description":"A sample cross platform mobile app that leverages GeoNode as a back-end","version":"0.1.0","private":false,"dependencies":{"@capacitor/android":"^2.4.1","@capacitor/core":"2.4.4","@ionic-native/core":"^5.28.0","@ionic-native/push":"^5.28.0","@ionic/react":"^5.0.7","@ionic/react-router":"^5.0.7","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.5.0","@types/jest":"^26.0.16","@types/leaflet":"^1.5.17","@types/leaflet-loading":"^0.1.0","@types/node":"^14.14.10","@types/react":"^16.9.17","@types/react-dom":"^17.0.0","@types/react-router":"^5.1.4","@types/react-router-dom":"^5.1.3","@types/uuid":"^8.3.0","axios":"^0.21.0","ionicons":"^5.0.0","phonegap-plugin-multidex":"^1.0.0","react":"^17.0.1","react-dom":"^17.0.1","react-router":"^5.1.2","react-router-dom":"^5.1.2","react-scripts":"^4.0.1","typescript":"4.1.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@capacitor/cli":"2.4.4"}}')},76:function(e,t,n){var c={"./ion-action-sheet.entry.js":[116,5],"./ion-alert.entry.js":[117,6],"./ion-app_8.entry.js":[118,7],"./ion-avatar_3.entry.js":[119,17],"./ion-back-button.entry.js":[120,18],"./ion-backdrop.entry.js":[121,43],"./ion-button_2.entry.js":[122,19],"./ion-card_5.entry.js":[123,20],"./ion-checkbox.entry.js":[124,21],"./ion-chip.entry.js":[125,22],"./ion-col_3.entry.js":[126,44],"./ion-datetime_3.entry.js":[127,10],"./ion-fab_3.entry.js":[128,23],"./ion-img.entry.js":[129,45],"./ion-infinite-scroll_2.entry.js":[130,46],"./ion-input.entry.js":[131,24],"./ion-item-option_3.entry.js":[132,25],"./ion-item_8.entry.js":[133,26],"./ion-loading.entry.js":[134,27],"./ion-menu_3.entry.js":[135,28],"./ion-modal.entry.js":[136,8],"./ion-nav_2.entry.js":[137,14],"./ion-popover.entry.js":[138,9],"./ion-progress-bar.entry.js":[139,29],"./ion-radio_2.entry.js":[140,30],"./ion-range.entry.js":[141,31],"./ion-refresher_2.entry.js":[142,11],"./ion-reorder_2.entry.js":[143,16],"./ion-ripple-effect.entry.js":[144,47],"./ion-route_4.entry.js":[145,32],"./ion-searchbar.entry.js":[146,33],"./ion-segment_2.entry.js":[147,34],"./ion-select_3.entry.js":[148,35],"./ion-slide_2.entry.js":[149,48],"./ion-spinner.entry.js":[150,13],"./ion-split-pane.entry.js":[151,49],"./ion-tab-bar_2.entry.js":[152,36],"./ion-tab_2.entry.js":[153,15],"./ion-text.entry.js":[154,37],"./ion-textarea.entry.js":[155,38],"./ion-toast.entry.js":[156,39],"./ion-toggle.entry.js":[157,12],"./ion-virtual-scroll.entry.js":[158,50]};function s(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(c)},s.id=76,e.exports=s},78:function(e,t,n){var c={"./ion-icon.entry.js":[160,57]};function s(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(c)},s.id=78,e.exports=s}},[[114,3,4]]]);
//# sourceMappingURL=main.323cd9fd.chunk.js.map